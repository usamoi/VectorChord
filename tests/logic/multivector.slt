statement ok
CREATE TABLE t (id integer, val vector(2)[]);

statement ok
INSERT INTO t (id, val) SELECT id, ARRAY[ARRAY[(10 * id)::real, 10 * id]::vector, ARRAY[(100005 - 10 * id)::real, (100005 - 10 * id)::real]::vector] FROM generate_series(1, 10000) s(id);

statement ok
CREATE INDEX t_val_idx ON t USING vchordrq (val vector_maxsim_l2_ops)
WITH (options = $$
build.internal.lists = []
$$);

statement ok
SET vchordrq.probes = '';

statement ok
SET vchordrq.max_maxsim_tuples = 100;

statement ok
SET enable_seqscan TO off;

query I
SELECT id FROM t ORDER BY val |<->| ARRAY['[19, 19]'::vector] limit 18;
----
2
9999
9998
1
3
10000
9997
4
9996
5
9995
6
9994
7
9993
8
9992
9

query I
SELECT id FROM t ORDER BY val |<->| ARRAY['[19, 19]'::vector, '[11.1, 11.1]'] limit 18;
----
9999
2
1
9998
10000
3
9997
4
9996
5
9995
6
9994
7
9993
8
9992
9

statement ok
DROP INDEX t_val_idx;

statement ok
DROP TABLE t;
